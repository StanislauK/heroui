# Telegram Mini App Setup

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º Telegram Mini App SDK –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ Telegram.

## üöÄ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### 1. **–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã**
- `@twa-dev/sdk` - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π SDK –¥–ª—è Telegram Mini App

### 2. **–°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- `useTelegram` - —Ö—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram WebApp API
- `TelegramTest` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- `telegram-web-app.js` - —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/test` –≤ —Ç–∞–± "Telegram Mini App"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ Telegram WebApp —Å–∫—Ä–∏–ø—Ç–∞

## üì± –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, username, —Ñ–æ—Ç–æ)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Premium —Å—Ç–∞—Ç—É—Å–∞
- –Ø–∑—ã–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- `showAlert()` - –ø–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `showConfirm()` - –ø–æ–∫–∞–∑–∞—Ç—å –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- `showPopup()` - –ø–æ–∫–∞–∑–∞—Ç—å popup —Å –∫–Ω–æ–ø–∫–∞–º–∏
- `expand()` - —Ä–∞—Å—à–∏—Ä–∏—Ç—å –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `close()` - –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### **–ó–∞–ø—Ä–æ—Å—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π**
- `requestPhone()` - –∑–∞–ø—Ä–æ—Å –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `requestContact()` - –∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `requestLocation()` - –∑–∞–ø—Ä–æ—Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- `requestWriteAccess()` - –∑–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–ø–∏—Å–∏

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∞–º–∏**
- `setMainButton()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
- `showBackButton()` - –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
- `hideMainButton()` - —Å–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- `sendData()` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Telegram
- `readTextFromClipboard()` - —á–∏—Ç–∞—Ç—å –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- `openLink()` - –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É
- `switchInlineQuery()` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ inline —Ä–µ–∂–∏–º

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. **–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ BotFather**
```
/newapp
```
- –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
- –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–ª—É—á–∏—Ç–µ `bot_token` –∏ `app_name`

### 2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```
/setapp
```
- –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
- –£–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ñ–æ—Ç–æ

### 3. **–í–∞–ª–∏–¥–∞—Ü–∏—è initData**
–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ `initData.hash` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```typescript
import crypto from 'crypto';

const validateInitData = (initData: string, botToken: string): boolean => {
  const urlParams = new URLSearchParams(initData);
  const hash = urlParams.get('hash');
  
  if (!hash) return false;
  
  // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É
  const params = Array.from(urlParams.entries())
    .filter(([key]) => key !== 'hash')
    .sort(([a], [b]) => a.localeCompare(b))
    .map(([key, value]) => `${key}=${value}`)
    .join('\n');
  
  // –°–æ–∑–¥–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
  const secretKey = crypto.createHmac('sha256', 'WebAppData').update(botToken).digest();
  
  // –í—ã—á–∏—Å–ª—è–µ–º —Ö–µ—à
  const calculatedHash = crypto.createHmac('sha256', secretKey).update(params).digest('hex');
  
  return calculatedHash === hash;
};
```

### 4. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–°–æ–∑–¥–∞–π—Ç–µ `.env.production`:
```env
VITE_TELEGRAM_BOT_TOKEN=your_bot_token_here
VITE_TELEGRAM_APP_NAME=your_app_name_here
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–í –±—Ä–∞—É–∑–µ—Ä–µ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)**
- –û—Ç–∫—Ä–æ–π—Ç–µ `/test` ‚Üí —Ç–∞–± "Telegram Mini App"
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ mock –æ–±—ä–µ–∫—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### **–í Telegram (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)**
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Telegram

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã**
```typescript
const { WebApp } = useTelegram();

// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–æ–≤
WebApp?.setHeaderColor('#3b82f6');
WebApp?.setBackgroundColor('#f8fafc');

// –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
useEffect(() => {
  if (WebApp?.colorScheme === 'dark') {
    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ–º–Ω—É—é —Ç–µ–º—É
  }
}, [WebApp?.colorScheme]);
```

### **–ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞**
```typescript
const { setMainButton, showMainButton } = useTelegram();

setMainButton({
  text: '–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑',
  color: '#10b981',
  text_color: '#ffffff',
  is_visible: true,
  is_active: true
});

showMainButton();
```

### **–ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"**
```typescript
const { showBackButton } = useTelegram();

showBackButton(() => {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
  navigate(-1);
});
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://core.telegram.org/bots/webapps)
- [Telegram Mini App SDK](https://github.com/twa-dev/sdk)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](https://github.com/twa-dev/sdk/tree/main/examples)
- [BotFather –∫–æ–º–∞–Ω–¥—ã](https://t.me/botfather)

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ `initData.hash`
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ TestNet –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. **–†–∞–∑–º–µ—Ä**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ª–µ–≥–∫–∏–º –∏ –±—ã—Å—Ç—Ä—ã–º
4. **UX**: –°–ª–µ–¥—É–π—Ç–µ –≥–∞–π–¥–ª–∞–π–Ω–∞–º Telegram –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ BotFather
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º Telegram
5. –î–æ–±–∞–≤—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é `initData` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
6. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
